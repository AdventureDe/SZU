!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VMonitor=t():e.VMonitor=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){return e}function s(e){return e?e.replace(/(^\s*)|(\s*$)|( )/g,""):""}function c(e){var t=[];for(var r in e)t.push(r);return!(t.length>0)}Object.defineProperty(t,"__esModule",{value:!0}),t.getStackMaxLenStr=t.getNetworkType=t.equal=t.initLocalStorage=t.isEmptyObject=t.doFilter=t.parseObjToSearchStr=t.parseSearchStrToObj=t.trim=t.converter=t.getCookies=void 0,t.getCookies=function(e,t){e=e||a,t=t||a;for(var r=document.cookie.split(";"),n={},o=0;o<r.length;++o){var i=r[o].split("=");if(2===i.length){var c=s(i[0]);c&&(n[c=e(c)]=t(s(i[1])))}}return n},t.converter=a,t.trim=s,t.parseSearchStrToObj=function(e){if(!e)return{};for(var t={},r=e.split("&"),n=0;n<r.length;n++){var o=r[n].indexOf("="),i=s(r[n].substr(0,o));i&&(t[i]=s(r[n].substring(o+1)))}return t},t.parseObjToSearchStr=function(e){if(!e)return"";var t=[];for(var r in e)t.push("".concat(r,"=").concat(e[r]));return t.join("&")},t.doFilter=function(e,t){if(!e||c(e)||!t)return{};var r,n={},i=o(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;n[a]=e[a]}}catch(e){i.e(e)}finally{i.f()}return n},t.isEmptyObject=c,t.initLocalStorage=function(e){if(!e)throw new Error('$localStorage: "namespace" needed!');var t=window.localStorage,r=function(){var r=t.getItem(e);return r&&"object"===n(JSON.parse(r))?JSON.parse(r):null};return{set:function(n,o){var i=r()||{};i[n]=o,t.setItem(e,JSON.stringify(i))},get:function(e){var t=r()||{};return e?t[e]:t},remove:function(n){var o=r()||{};delete o[n],t.setItem(e,JSON.stringify(o))},removeAll:function(){t.removeItem(e)}}},t.equal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).every((function(r){return e[r]===t[r]}))},t.getNetworkType=function(){var e=window.navigator,t=e.userAgent.match(/NetType\/\w+/),r=e.connection||e.mozConnection||e.webkitConnection,n="";if(t)switch(t[0].toLowerCase().replace("nettype/","")){case"wifi":n="wifi";break;case"5g":n="5g";break;case"4g":n="4g";break;case"3g":case"3gnet":n="3g";break;case"2g":n="2g";break;default:n="未知"}else n=r&&r.type?r.type:"未知";return n},t.getStackMaxLenStr=function(e,t){var r=t&&t>0?t:400;return e?e.length>r&&(e=e.substr(0,r-3)+"..."):e="",e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0,t.default=function(e){var t=window.location.href,r=new RegExp("[?&]"+e+"=([^&#]*)","i"),n=t.match(r);return null!=n?decodeURIComponent(n[1]):""},t.parse=function(e){var t=(e=decodeURI(e)).replace(/(^\s*)|(\s*$)/g,"");/^(https?|file|ftp):/.test(t)||/^\/\//.test(t)||(t=/^\//.test(t)?"".concat(location.origin).concat(t):"".concat(location.href,"/").concat(t));return/^(([A-Za-z]+):)?\/\/([^:\/]+)(:(\d+))?([^#]+)?(#(.+))?$/.test(t)?{host:RegExp.$3,protocol:RegExp.$1||self.location.protocol,port:RegExp.$5,search:RegExp.$6,hash:RegExp.$7}:null}},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(r(3)),a=o(r(9));t.default=function(e){try{var t,r=this.win,o={},s=this.getReportCommonParams(),c=r.navigator;null!=c&&null!==(t=c.connection)&&void 0!==t&&t.downlink&&c.connection.downlink.toString().length<10&&(o.downlink=c.connection.downlink);var u=r.performance||r.msPerformance||r.webkitPerformance;null!=u&&u.timing&&i.default.call(this,u,o,e,+s.appclickTime),delete s.appclickTime;var f=!0,l=o;for(var p in l)if(l[p]<0){f=!1;break}if(!f)return;if((l.fpt<=0||l.fpt>3e4||l.fcp<=0||l.fcp>3e4||l.ready<=0||l.ready>3e4||l.load<=0||l.load>3e4||l.appCostTime<0||l.appCostTime>1e4)&&(f=!1),!f)return;var d={ruleId:this.options.performanceRuleId,timestamp:Date.now(),msg:n({},s,{performance:o}),zeusEnv:this.options.zeusEnv};this.sendReport(d,"performance","xhr"),a.default.call(this,s)}catch(e){console.log("Tool's error: "+e)}},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){var o=e.timing,i=e.getEntriesByType("paint");if(t.ttfb=o.responseStart-o.fetchStart,t.wst=o.domLoading-o.fetchStart,t.fpt=t.fpt2=t.fptWithApp=0,t.fcp=t.fcpWithApp=0,i&&i.length){var a=i.filter((function(e){return"first-contentful-paint"===e.name}));a&&a.length&&(t.fcp=t.fcpWithApp=parseInt(a[0].startTime.toFixed()));var s=i.filter((function(e){return"first-paint"===e.name}));s&&s.length?t.fpt=t.fpt2=t.fptWithApp=parseInt(s[0].startTime.toFixed()):t.fpt=t.fpt2=t.fptWithApp=t.fcp}t.tti=t.ttiWithApp=o.domInteractive-o.fetchStart,t.ready=o.domContentLoadedEventEnd-o.fetchStart,t.load=t.loadWithApp=o.loadEventStart-o.fetchStart;var c=t.load;t.loadPeriod=0,c>=0&&(t.loadPeriod=1e3*Math.floor(c/1e3)+(c%1e3?c%1e3>500?1e3:500:0)),t.renderBeginTime=this.options.reportRender?r:0;var u=0;n&&o.navigationStart>n&&(u=o.navigationStart-n,t.fptWithApp+=u,t.fcpWithApp+=u,t.ttiWithApp+=u,t.loadWithApp+=u),t.appCostTime=u,t.dns=o.domainLookupEnd-o.domainLookupStart,t.tcp=o.connectEnd-o.connectStart,t.req=o.responseStart-o.requestStart,t.trans=o.responseEnd-o.responseStart,t.requestTime=o.responseEnd-o.requestStart,t.dom=o.domInteractive-o.responseEnd,t.res=o.loadEventStart-o.domContentLoadedEventEnd,t.ssl=o.secureConnectionStart?o.connectEnd-o.secureConnectionStart:0},e.exports=t.default},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=new(n(r(5)).default),i={version:o.version,init:function(e){o.init(e)},report:function(e){o.report(e)},rendered:function(){o.rendered()},initVue:function(e){o.initVue(e)},getOptions:function(){return o.getOptions()}};t.default=i,e.exports=t.default},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(6),c=r(0),u=a(r(8)),f=a(r(14)),l=a(r(2)),p=a(r(15)),d=a(r(16)),v=a(r(17)),m=a(r(19)),h=a(r(24)),g=a(r(25)),y=a(r(26)),S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.version="2.2.6",this.win=window,this.cache=[],this.isPageLoaded=!1,this.renderFlag=!1,this.userActionsRecords=[],this.uuid=s.uuid(),this.pvid=s.pvid(),this.errCnt=0,this.errMaxCnt=1e3,this.sendReport=f.default,this.getReportCommonParams=m.default,this.userActionSave=y.default,this.registerReport=u.default,this.errorEventAndResourceInit=p.default,this.errorRejectPromise=d.default,this.errorAjaxInit=v.default,this.userActionRewrite=g.default}var t,r,a;return t=e,(r=[{key:"init",value:function(e){try{if(!e.id)return;e.uuid&&(this.uuid=e.uuid);var t="test";"prd"===e.zeusEnv&&(e.zeusEnv="prod"),e.reportUrl&&-1!==e.reportUrl.indexOf("st-sentinel.vivo.com.cn")&&(t="prod"),void 0!==e.isProd&&(t=e.isProd?"prod":"test"),e.zeusEnv&&(t=e.zeusEnv),e.zeusEnv=t,e.errorRuleId=142,e.performanceRuleId=143,e.resourceRuleId=144,e.reportUrl="//st-sentinel.vivo.com.cn/h5/monitor",e.resourceUrl=e.resourceUrl||("prod"===e.zeusEnv?"//sentinelapi.vivo.com.cn/api/h5/monitor/resource":"//sentinelapi-test.vivo.com.cn/api/h5/monitor/resource");var r="true"===new URLSearchParams(location.search).get("isZeusDev");("zeus-test.vmic.xyz"===window.location.host||-1!==window.location.host.indexOf("zeus-local")||"sentinelapi-test.vivo.com.cn"===window.location.host||r)&&(e.reportUrl="//st-sentinel-test.vivo.com.cn/h5/monitor"),/^\/\//.test(e.reportUrl)&&-1===window.location.protocol.indexOf("http")&&(e.reportUrl="https:"+e.reportUrl),/^\/\//.test(e.resourceUrl)&&-1===window.location.protocol.indexOf("http")&&(e.resourceUrl="https:"+e.resourceUrl),this.options=e,this.reportSnapshotManager=new h.default({repeatMax:5,queueLen:5,errorRuleId:e.errorRuleId}),this.registerReport(),this.errorEventAndResourceInit(),this.errorRejectPromise(),this.errorAjaxInit(),this.userActionRewrite()}catch(e){console.log("Tool's error: "+e)}}},{key:"report",value:function(e){try{if(!e||c.isEmptyObject(e))return;var t=e.ruleId,r=e.zeusEnv,i=void 0===r?"prod":r;if(!t)return console.warn("宙斯监控ruleId必传");var a=o({},e,{ruleId:t,timestamp:Date.now(),zeusEnv:i});this.options.id&&(a.msg||(a.msg={}),"object"!==n(a.msg)||a.msg instanceof Array||void 0!==a.msg.id||(a.msg.id=this.options.id)),this.sendReport(a,"custom","xhr")}catch(e){console.log("Tool's error: "+e)}}},{key:"rendered",value:function(){var e=this;try{if(this.renderFlag)return;if(this.renderFlag=!0,!this.options.reportRender)return void console.warn("请在配置中打开自定义上报开关reportRender: true");var t=this.win,r=t.performance||t.msPerformance||t.webkitPerformance,n=parseInt(r.now().toFixed());r.timing.loadEventEnd?(this.isPageLoaded=!0,n>=2e3?l.default.call(this,n):setTimeout((function(){l.default.call(e,n)}),2e3-n)):window.addEventListener("load",(function(){e.isPageLoaded=!0,n>=2e3?l.default.call(e,n):setTimeout((function(){l.default.call(e,n)}),2e3-n)}))}catch(e){console.log("Tool's error: "+e)}}},{key:"initVue",value:function(e){var t=this;try{e.config.errorHandler=function(e){var r=e.message,n=e.name,i=e.script,a=e.line,s=e.col,u=e.stack,f="";f=u?u.toString():n&&r?"".concat(n,":").concat(r):JSON.stringify(e);var l=e.stack.match(/.* at (.* )?\(?(.*):(\d+):(\d+)\)?.*/);l[2]&&(i=l[2]),l[3]&&(a=+l[3]),l[4]&&(s=+l[4]);var p={error:{category:"js",path:c.getStackMaxLenStr(i),lineNumber:a||0,colNumber:s||0,stackTrace:c.getStackMaxLenStr(f)||"未捕获到错误堆栈信息"}},d=o({},p.error);delete d.category,t.userActionSave("js",JSON.stringify(d)),p.error.actions=t.userActionsRecords;var v={ruleId:t.options.errorRuleId,timestamp:Date.now(),msg:o({},t.getReportCommonParams(),p),zeusEnv:t.options.zeusEnv};t.sendReport(v,"error","xhr"),console.error(e)}}catch(e){console.log("monitor tools error: vue errhandler"+e)}}},{key:"getOptions",value:function(){return this.options}}])&&i(t.prototype,r),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=S,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pvid=t.uuid=void 0;var n=r(7);function o(){var e=Date.now();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:11&r).toString(16)}))}t.uuid=function(){var e=window.localStorage.getItem(n.LOCAL_STORAGE.uuid);if(e)return e;var t=o();return window.localStorage.setItem(n.LOCAL_STORAGE.uuid,t),t},t.pvid=function(){return o()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOCAL_STORAGE=t.ReportDataTypes=void 0,function(e){e[e.Performance=0]="Performance",e[e.AjaxError=1]="AjaxError",e[e.JsError=2]="JsError",e[e.ResourceError=3]="ResourceError",e[e.Custom=4]="Custom"}(t.ReportDataTypes||(t.ReportDataTypes={})),t.LOCAL_STORAGE={uuid:"zs|1|uuid"}},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(2)),i=n(r(11)),a=n(r(13)),s=n(r(1));t.default=function(){var e=this;this.win.addEventListener("load",(function(){e.isPageLoaded=!0,a.default.call(e),window.setTimeout((function(){!e.options.reportRender&&o.default.call(e)}),1e3),"true"===s.default("zeusResourceSwitch")&&window.setTimeout((function(){i.default.call(e)}),2e3)}))},e.exports=t.default},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(10);t.default=function(e){try{var t=function(e){var t=e.name,n=(e.id,e.delta);"LCP"!==t?"FID"!==t?("CLS"===t&&(s.cls=Number(n.toFixed(3))),void 0===s.lcp&&(s.lcp=0),s.lcp>3e4||(void 0===s.fid&&(s.fid=0),s.fid>3e4||s.lcp>=0&&s.fid>=0&&s.cls>=0&&r())):s.fid=Number(n.toFixed(0)):s.lcp=Number(n.toFixed(0))},r=function(){if(-1!==window.location.protocol.indexOf("http")){var t={ruleId:"cBMxJIiM",timestamp:Date.now(),msg:n({},e,{performance:s}),zeusEnv:a};i.sendReport(t,"performance","beaconPrior")}},i=this,a=this.options.zeusEnv,s=(this.options.reportUrl,{});o.getLCP(t),o.getFID(t),o.getCLS(t)}catch(e){console.log("Tool's error: "+e)}},e.exports=t.default},function(e,t,r){"use strict";r.r(t),r.d(t,"getCLS",(function(){return S})),r.d(t,"getFCP",(function(){return h})),r.d(t,"getFID",(function(){return T})),r.d(t,"getLCP",(function(){return P})),r.d(t,"getTTFB",(function(){return R}));var n,o,i,a,s=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},c=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var r=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return r.observe({type:e,buffered:!0}),r}}catch(e){}},u=function(e,t){var r=function r(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||(e(n),t&&(removeEventListener("visibilitychange",r,!0),removeEventListener("pagehide",r,!0)))};addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)},f=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},l=function(e,t,r){var n;return function(o){t.value>=0&&(o||r)&&(t.delta=t.value-(n||0),(t.delta||void 0===n)&&(n=t.value,e(t)))}},p=-1,d=function(){return"hidden"===document.visibilityState?0:1/0},v=function(){u((function(e){var t=e.timeStamp;p=t}),!0)},m=function(){return p<0&&(p=d(),v(),f((function(){setTimeout((function(){p=d(),v()}),0)}))),{get firstHiddenTime(){return p}}},h=function(e,t){var r,n=m(),o=s("FCP"),i=function(e){"first-contentful-paint"===e.name&&(u&&u.disconnect(),e.startTime<n.firstHiddenTime&&(o.value=e.startTime,o.entries.push(e),r(!0)))},a=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],u=a?null:c("paint",i);(a||u)&&(r=l(e,o,t),a&&i(a),f((function(n){o=s("FCP"),r=l(e,o,t),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-n.timeStamp,r(!0)}))}))})))},g=!1,y=-1,S=function(e,t){g||(h((function(e){y=e.value})),g=!0);var r,n=function(t){y>-1&&e(t)},o=s("CLS",0),i=0,a=[],p=function(e){if(!e.hadRecentInput){var t=a[0],n=a[a.length-1];i&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,a.push(e)):(i=e.value,a=[e]),i>o.value&&(o.value=i,o.entries=a,r())}},d=c("layout-shift",p);d&&(r=l(n,o,t),u((function(){d.takeRecords().map(p),r(!0)})),f((function(){i=0,y=-1,o=s("CLS",0),r=l(n,o,t)})))},b={passive:!0,capture:!0},w=new Date,x=function(e,t){n||(n=t,o=e,i=new Date,j(removeEventListener),O())},O=function(){if(o>=0&&o<i-w){var e={entryType:"first-input",name:n.type,target:n.target,cancelable:n.cancelable,startTime:n.timeStamp,processingStart:n.timeStamp+o};a.forEach((function(t){t(e)})),a=[]}},E=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var r=function(){x(e,t),o()},n=function(){o()},o=function(){removeEventListener("pointerup",r,b),removeEventListener("pointercancel",n,b)};addEventListener("pointerup",r,b),addEventListener("pointercancel",n,b)}(t,e):x(t,e)}},j=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,E,b)}))},T=function(e,t){var r,i=m(),p=s("FID"),d=function(e){e.startTime<i.firstHiddenTime&&(p.value=e.processingStart-e.startTime,p.entries.push(e),r(!0))},v=c("first-input",d);r=l(e,p,t),v&&u((function(){v.takeRecords().map(d),v.disconnect()}),!0),v&&f((function(){var i;p=s("FID"),r=l(e,p,t),a=[],o=-1,n=null,j(addEventListener),i=d,a.push(i),O()}))},k={},P=function(e,t){var r,n=m(),o=s("LCP"),i=function(e){var t=e.startTime;t<n.firstHiddenTime&&(o.value=t,o.entries.push(e),r())},a=c("largest-contentful-paint",i);if(a){r=l(e,o,t);var p=function(){k[o.id]||(a.takeRecords().map(i),a.disconnect(),k[o.id]=!0,r(!0))};["keydown","click"].forEach((function(e){addEventListener(e,p,{once:!0,capture:!0})})),u(p,!0),f((function(n){o=s("LCP"),r=l(e,o,t),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-n.timeStamp,k[o.id]=!0,r(!0)}))}))}))}},R=function(e){var t,r=s("TTFB");t=function(){try{var t=performance.getEntriesByType("navigation")[0]||function(){var e=performance.timing,t={entryType:"navigation",startTime:0};for(var r in e)"navigationStart"!==r&&"toJSON"!==r&&(t[r]=Math.max(e[r]-e.navigationStart,0));return t}();if(r.value=r.delta=t.responseStart,r.value<0||r.value>performance.now())return;r.entries=[t],e(r)}catch(e){}},"complete"===document.readyState?setTimeout(t,0):addEventListener("load",(function(){return setTimeout(t,0)}))}},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=s(r(3)),u=s(r(1)),f=s(r(12));t.default=function(e){var t=this;try{var r=this.win,o={},a=[],s=r.navigator;s&&s.connection&&s.connection.downlink&&s.connection.downlink.toString().length<10&&(o.downlink=s.connection.downlink);var l=r.performance||r.msPerformance||r.webkitPerformance;if(l&&l.timing&&(c.default.call(this,l,o,e),o.redirectCount=l.navigation.redirectCount,o.resourceSize=0,o.domCount=document.getElementsByTagName("*").length),l&&l.getEntriesByType("resource")){var p=l.getEntriesByType("resource"),d=document.getElementsByTagName("audio"),v=document.getElementsByTagName("video");p.filter((function(e){return/\.(css)([?|&].*)?$/.test(e.name)})).forEach((function(e){a.push({url:e.name,type:"css",size:0,duration:0})})),p.filter((function(e){return/\.(js)([?|&].*)?$/.test(e.name)})).forEach((function(e){a.push({url:e.name,type:"js",size:0,duration:0})})),p.filter((function(e){return/\.(jpeg|jpg|gif|png|webp|svg)/.test(e.name)})).forEach((function(e){a.push({url:e.name,type:"img",size:0,duration:0})})),p.filter((function(e){return["xmlhttprequest","fetch","beacon"].indexOf(e.initiatorType)>-1&&-1===e.name.indexOf(t.options.reportUrl)&&-1===e.name.indexOf(t.options.resourceUrl)})).forEach((function(e){a.push({url:e.name,type:"ajax",size:e.transferSize,duration:Math.round(e.duration)})})),p.filter((function(e){return["other"].indexOf(e.initiatorType)>-1})).forEach((function(e){a.push({url:e.name,type:"other",size:e.transferSize,duration:Math.round(e.duration)})}));for(var m=0;m<d.length;m++)a.push({url:d[m].currentSrc,type:"audio",size:0,duration:0});for(var h=0;h<v.length;h++)a.push({url:v[h].currentSrc,type:"video",size:0,duration:0})}var g=decodeURI(f.default("zeusResourceAdditional")),y=i(i({},JSON.parse(g||"{}")),{},{projectId:u.default("projectId")}),S={ruleId:this.options.resourceRuleId||0,timestamp:Date.now(),additional:y,msg:n({},this.getReportCommonParams(),{overview:o,resources:a}),zeusEnv:this.options.zeusEnv};this.sendReport(S,"resource","xhr")}catch(e){console.log("Tool's error: "+e)}},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):""},e.exports=t.default},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;window.setTimeout((function(){try{var t={ruleId:e.options.errorRuleId,timestamp:Date.now(),msg:n({},e.getReportCommonParams(),{error:{actions:[],category:"pv",path:"-",lineNumber:0,colNumber:0,stackTrace:""}}),zeusEnv:e.options.zeusEnv};e.sendReport(t,"error","xhr")}catch(e){console.log("Tool's error: "+e)}}),0)},e.exports=t.default},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=n(r(1));t.default=function(e,t,r){try{if(!e||o.isEmptyObject(e))return;var n=Array.isArray(e.msg),a=e.msg;if(n)return;if("performance"==t||"error"==t){if("prod"!==e.zeusEnv&&"test"!==e.zeusEnv)return;if("vivoapps"!==a.platform&&"未知"!==a.platform)return;if(a.referrer&&!/^(http:\/\/|https:\/\/|file:\/\/\/).*$/.test(a.referrer))return;if(!/^(http:\/\/|https:\/\/|file:\/\/\/).*$/.test(a.pageUrl))return;var s=!0;for(var c in a)if("string"==typeof a[c]&&"referrer"!==c&&"pageUrl"!==c&&(/\${/.test(a[c])||/fn_sqlvarbasetostr/.test(a[c])||/Baiduspider/.test(a[c])||/DBMS_PIPE\.RECEIVE_MESSAGE/.test(a[c])||/\#set\(\$c/.test(a[c])||/\(select/.test(a[c])||/未知.+/.test(a[c]))){s=!1;break}if(!s)return}if(this.reportSnapshotManager.shouldBeDropped(e))return;var u=JSON.parse(JSON.stringify(e));if("error"===t){var f,l;if(null!==(f=u.msg)&&void 0!==f&&null!==(l=f.error)&&void 0!==l&&l.actions&&u.msg.error.actions.forEach((function(e){delete e.client})),this.errCnt>=this.errMaxCnt)return;this.errCnt++}var p=JSON.stringify(u).replace(/(jvq|param)/g,(function(e){return e.toUpperCase()})),d="resource"===t?this.options.resourceUrl:this.options.reportUrl,v=function(){var e=new XMLHttpRequest;e.open("POST",d,!0),e.timeout=7e3,e.withCredentials=!1,e.setRequestHeader("Content-type","application/json; charset=UTF-8"),e.send(p),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status&&"resource"===t&&e.responseText){var r=JSON.parse(e.responseText);if(r.data){var n=location.host.substr(location.host.indexOf(".")),o=i.default("zeusResourcePageId");setTimeout((function(){o&&(document.cookie="".concat(o,"=").concat(r.data,";domain=").concat(n,";path=/"))}),1e3)}}}};if("xhr"!==r&&r){if("beaconPrior"===r){navigator.sendBeacon?navigator.sendBeacon(d,p):fetch?(m=new AbortController,fetch(d,{method:"POST",signal:m.signal,body:p,keepalive:!0}),setTimeout((function(){return m.abort()}),7e3)):v()}}else v()}catch(e){console.log("Tool's error: "+e)}var m},e.exports=t.default},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0);t.default=function(){var e=this;this.win.addEventListener("error",(function(t){try{if(t){var r=t.target||t.srcElement;if(r instanceof HTMLScriptElement||r instanceof HTMLLinkElement||r instanceof HTMLImageElement){if(r&&"dataMonitor"===r.parentElement.id)return;var i=r.src||r.href;if(r.nodeName&&"IMG"===r.nodeName){if(!/\.(png|jpe?g|gif|svg|webp|bmp)(\?.*)?$/.test(i))return}var a={error:{category:"resource",path:o.getStackMaxLenStr(i),stackTrace:o.getStackMaxLenStr(r.outerHTML.replace(/&amp;/g,"&").replace(/src=/g,"srce="))||"未捕获到错误堆栈信息"}},s={ruleId:e.options.errorRuleId,timestamp:Date.now(),msg:n({},e.getReportCommonParams(),a),zeusEnv:e.options.zeusEnv},c=n({},a.error);delete c.category,e.userActionSave("resource",JSON.stringify(c)),a.error.actions=e.userActionsRecords,e.sendReport(s,"error","xhr")}else{var u=t.message,f=t.filename,l=t.lineno,p=t.colno,d=t.error;if(d&&d.stack){var v=d.stack.toString(),m={error:{category:"js",path:o.getStackMaxLenStr(f),lineNumber:l||0,colNumber:p||0,stackTrace:o.getStackMaxLenStr(v)||"未捕获到错误堆栈信息"}},h=n({},m.error);delete h.category,e.userActionSave("js",JSON.stringify(h)),m.error.actions=e.userActionsRecords;var g={ruleId:e.options.errorRuleId,timestamp:Date.now(),msg:n({},e.getReportCommonParams(),m),zeusEnv:e.options.zeusEnv};e.sendReport(g,"error","xhr")}else if("string"==typeof u){var y={error:{category:"js",path:o.getStackMaxLenStr(f),lineNumber:l||0,colNumber:p||0,stackTrace:o.getStackMaxLenStr(u)||"未捕获到错误堆栈信息"}},S={ruleId:e.options.errorRuleId,timestamp:Date.now(),msg:n({},e.getReportCommonParams(),y),zeusEnv:e.options.zeusEnv},b=n({},y.error);delete b.category,e.userActionSave("js",JSON.stringify(b)),y.error.actions=e.userActionsRecords,e.sendReport(S,"error","xhr")}}}}catch(e){console.log("Tool's error: "+e)}}),!0)},e.exports=t.default},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(0);t.default=function(){var e=this;this.win.addEventListener("unhandledrejection",(function(t){try{if(t){var r=t.reason,a="";r.stack&&(a="object"===o(r.stack)?JSON.stringify(r.stack):r.stack),a&&"{}"!==a||!r.message||(a="object"===o(r.message)?JSON.stringify(r.message):r.message),a&&"{}"!==a||!r.data||(a="object"===o(r.data)?JSON.stringify(r.data):r.data),a&&"{}"!==a||(a=JSON.stringify(r));var s="",c=0,u=0;if(a&&"string"==typeof a){var f=a.match(/.* at (.* )?\(?(.*):(\d+):(\d+)\)?.*/);f&&f[2]&&(s=f[2]),f&&f[3]&&(c=+f[3]),f&&f[4]&&(u=+f[4])}var l={error:{category:"js",category2:"unhandledrejection",path:s,lineNumber:c,colNumber:u,stackTrace:i.getStackMaxLenStr(a)||"未捕获到错误堆栈信息"}},p={ruleId:e.options.errorRuleId,timestamp:Date.now(),msg:n({},e.getReportCommonParams(),l),zeusEnv:e.options.zeusEnv},d=n({},l.error);delete d.category,e.userActionSave("js",JSON.stringify(d)),l.error.actions=e.userActionsRecords,e.sendReport(p,"error","xhr")}}catch(e){console.log("Tool's error: "+e)}}),!0)},e.exports=t.default},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(r(18)),a=r(0);t.default=function(){var e=this,t=this.win;if("file:"!==t.location.protocol&&(i.default.call(this),t.XMLHttpRequest)){var r=t.XMLHttpRequest,o=r.prototype.open;r.prototype.open=function(e,t){o.apply(this,arguments),this.ajaxUrl=t};var s=r.prototype.send,c=function(t){try{if(t&&t.currentTarget&&t.currentTarget.status){var r=t.currentTarget,o=t.currentTarget.status,i={error:{category:"ajax",path:a.getStackMaxLenStr(r.responseURL||r.ajaxUrl),stackTrace:a.getStackMaxLenStr(r.statusText||"".concat(r.status,":::").concat(r.responseURL||r.ajaxUrl)),httpStatus:r.status}},s=n({},i.error);if(delete s.category,e.userActionSave("ajax",JSON.stringify(s)),i.error.actions=e.userActionsRecords,o<200||o>=300){var c={ruleId:e.options.errorRuleId,timestamp:Date.now(),msg:n({},e.getReportCommonParams(),i),zeusEnv:e.options.zeusEnv};e.sendReport(c,"error","xhr")}}}catch(e){console.log("Tool's error: "+e)}};r.prototype.send=function(){if(this.addEventListener)this.addEventListener("error",c),this.addEventListener("load",c),this.addEventListener("abort",c);else{var e=this.onreadystatechange;this.onreadystatechange=function(t){4===this.readyState&&c(t),e&&e.apply(this,arguments)}}return s.apply(this,arguments)}}},e.exports=t.default},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0);t.default=function(){var e=this,t=this.win,r=this.options,i=this.userActionsRecords;if(t.fetch){var a=t.fetch;t.fetch=function(){for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];var f=c[0]&&c[0].toString();return a.apply(t,c).then((function(t){try{var a={error:{category:"ajax",path:o.getStackMaxLenStr(f),stackTrace:o.getStackMaxLenStr(t.statusText||"".concat(t.status,":::").concat(f)),httpStatus:t.status}},s=n({},a.error);if(delete s.category,e.userActionSave("ajax",JSON.stringify(s)),a.error.actions=i,!t.ok){var c={ruleId:r.errorRuleId,timestamp:Date.now(),msg:n({},e.getReportCommonParams(),a),zeusEnv:r.zeusEnv};e.sendReport(c,"error","xhr")}}catch(e){console.log("Tool's error: "+e)}return t})).catch((function(t){try{var a=t.stack&&t.stack.toString()||t.message||"",s={error:{category:"ajax",path:o.getStackMaxLenStr(f),stackTrace:o.getStackMaxLenStr(a)}},c={ruleId:r.errorRuleId,timestamp:Date.now(),msg:n({},e.getReportCommonParams(),s),zeusEnv:r.zeusEnv},u=n({},s.error);delete u.category,e.userActionSave("ajax",JSON.stringify(u)),s.error.actions=i,e.sendReport(c,"error","xhr")}catch(e){console.log("Tool's error: "+e)}throw t}))}}},e.exports=t.default},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),a=o(r(20)),s=o(r(21)),c=o(r(22)),u=o(r(23));t.default=function(){var e=this.win,t=this.version,r=this.options,o=this.cacheParams,f=i.parseSearchStrToObj(e.location.search.substring(1)),l=e.location.hash,p=l.indexOf("?"),d=p>-1?l.substring(p+1):"",v=n({},f,i.parseSearchStrToObj(d));if(!o){var m=a.default.call(this),h=i.doFilter(v,["nt"]).nt||m.nt||i.getNetworkType(),g=s.default(),y=c.default(),S=u.default();this.cacheParams={id:r.id,version:t,pageUrl:"",nt:e.decodeURIComponent(h),platform:e.decodeURIComponent(m.platform),model:e.decodeURIComponent(m.model),app:e.decodeURIComponent(m.app),appVersion:e.decodeURIComponent(m.app_version),androidVersion:e.decodeURIComponent(m.android_version),turbo:e.decodeURIComponent(m.turbo),appclickTime:m.appclick_time,ua:e.decodeURIComponent(m.ua),referrer:e.document.referrer,osInfo:e.decodeURIComponent(g),browserInfo:e.decodeURIComponent(y),mobileBrandInfo:e.decodeURIComponent(S),uuid:this.uuid,pvid:this.pvid,branchName:r.branchName||""}}var b=i.getStackMaxLenStr(e.location.href);b=b.replace(/(jvq|param)/g,(function(e){return e.toUpperCase()}));var w=i.doFilter(v,["pageUrl"]);return"sentinelapi-test.vivo.com.cn"===window.location.host&&w&&w.pageUrl&&(b=w.pageUrl),n({},this.cacheParams,{pageUrl:b})},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.default=function(){var e=this.win,t=e,r={},o=e.navigator.userAgent.toLowerCase(),i=n.getCookies(),a=null;if(/(vivoBrowser|vivoMiniBrowser)/i.test(e.navigator.userAgent)&&!!t.vivoNewsDetailPage&&!!t.vivoNewsDetailPage.getCommonParams){var s=t.vivoNewsDetailPage.getCommonParams();s&&(a=JSON.parse(s))}r.ua=e.navigator.userAgent,r.app=i.vvc_pn||i.pn||a&&"com.vivo.browser"||-1!==o.indexOf("micromessenger")&&"微信"||"未知",r.model=i.vvc_model||i.model||a&&a.model||"未知";var c=e.navigator.userAgent.toLowerCase().match(/vivobrowser\/([0-9].*)/i);if(r.app_version=i.vvc_app_version||i.app_version||c&&2===c.length&&c[1]||"未知",r.android_version=i.vvc_an||i.vvc_adrVerName||i.an||i.adrVerName||a&&(a.an||a.adrVerName)||"未知",r.platform=i.vvc_pn||i.pn||a?"vivoapps":"未知",r.nt=i.vvc_nt||i.nt||a&&(a.nt||a.netType)||"未知","0"===i.vvc_turbo_status||"1"===i.vvc_turbo_status?r.turbo=i.vvc_turbo_status:r.turbo="未知",i.vvc_appclick){var u=i.vvc_appclick;u!==e.localStorage.getItem("vvc_appclick")?(r.appclick_time=u,e.localStorage.setItem("vvc_appclick",u)):r.appclick_time="0"}else r.appclick_time="0";return r},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e,t=navigator.userAgent.toLowerCase(),r="Unknown";if(t.indexOf("win")>-1)r=t.indexOf("windows nt 5.0")>-1?"Windows 2000":t.indexOf("windows nt 5.1")>-1||t.indexOf("windows nt 5.2")>-1?"Windows XP":t.indexOf("windows nt 6.0")>-1?"Windows Vista":t.indexOf("windows nt 6.1")>-1||t.indexOf("windows 7")>-1?"Windows 7":t.indexOf("windows nt 6.2")>-1||t.indexOf("windows 8")>-1?"Windows 8":t.indexOf("windows nt 6.3")>-1?"Windows 8.1":t.indexOf("windows nt 6.2")>-1||t.indexOf("windows nt 10.0")>-1?"Windows 10":"Windows";else if(t.indexOf("iphone")>-1)r="iPhone";else if(t.indexOf("mac")>-1)r="Mac";else if(t.indexOf("x11")>-1||t.indexOf("unix")>-1||t.indexOf("sunname")>-1||t.indexOf("bsd")>-1)r="Unix";else if(t.indexOf("linux")>-1)if(t.indexOf("android")>-1){r="Android";var n=(e=(t||navigator.userAgent).toLowerCase().match(/android\s([0-9\.]*)/))?e[1]:"Unknown";n&&(r+=" "+n)}else r="Linux";return r},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=navigator.userAgent.toLowerCase(),t="未知";return e.indexOf("chrome")>-1?t="Chrome":e.indexOf("safari")>-1?t="Safari":e.indexOf("opera")>-1?t="Opera":e.indexOf("firefox")>-1?t="Firefox":e.indexOf("edge")>-1?t="Edge":e.indexOf("ie")>-1&&(t="IE"),t},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=navigator.userAgent.toLowerCase(),t="未知";return e.indexOf("vivo")>-1?t="Vivo":e.indexOf("oppo")>-1?t="Oppo":e.indexOf("huawei")>-1?t="Huawei":e.indexOf("honor")>-1?t="Honor":e.indexOf("xiaomi")>-1?t="XiaoMi":e.indexOf("iphone")>-1?t="iPhone":e.indexOf("sm-")>-1&&(t="Samsung"),t},e.exports=t.default},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queue=[],this.repeatMax=t.repeatMax,this.queueLen=t.queueLen,this.errorRuleId=t.errorRuleId}var t,r,a;return t=e,(r=[{key:"shouldBeDropped",value:function(e){if(e.ruleId!==this.errorRuleId)return!1;var t=this._transform(e),r=this._findSnapshot(t);if(r&&r.count>=this.repeatMax)return!0;r?r.count+=1:(this.queue.push({count:1,data:t}),this.queue.length>this.queueLen&&this.queue.shift())}},{key:"_transform",value:function(e){return n({ruleId:e.ruleId},e.msg.error)}},{key:"_findSnapshot",value:function(e){return this.queue.find((function(t){return i.equal(t.data,e)}))}}])&&o(t.prototype,r),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=a,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.default=function(){var e=this,t="";document.addEventListener("click",(function(t){try{var r=t.target,o=n.getStackMaxLenStr(r.outerHTML);if(/(<[^>]*>).*(<\/.*>)/.test(r.outerHTML)){var i=r.outerHTML.match(/(<[^>]*>).*(<\/.*>)/);if(i&&3===i.length){var a=r.innerText||"";o=(i[1]+a+i[2]).length<=400?i[1]+a+i[2]:n.getStackMaxLenStr(i[1],180)+n.getStackMaxLenStr(a,200)+n.getStackMaxLenStr(i[2],20)}}e.userActionSave("click",o,t)}catch(e){console.log(e)}}),!0),window.addEventListener("popstate",(function(r){try{e.userActionSave("history",JSON.stringify({from:n.getStackMaxLenStr(t,190),to:n.getStackMaxLenStr(document.location.href,190)})),t=document.location.href}catch(e){console.log(e)}}));var r=History.prototype.pushState;History.prototype.pushState=function(o,i,a){try{e.userActionSave("history",JSON.stringify({from:n.getStackMaxLenStr(t,190),to:n.getStackMaxLenStr(a||"",190)})),t=a||""}catch(e){console.log(e)}return r.call(this,o,i,a)};var o=History.prototype.replaceState;History.prototype.replaceState=function(r,i,a){try{e.userActionSave("history",JSON.stringify({from:n.getStackMaxLenStr(t,190),to:n.getStackMaxLenStr(a||"",190)})),t=a||""}catch(e){console.log(e)}return o.call(this,r,i,a)},t=document.location.href},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(t)try{var n=Date.now();if("click"===e){if(this.userActionsRecords.slice(0).reverse().find((function(e){return"click"===e.category&&n-parseFloat(e.timestamp)<200&&(e.msg===t||r&&e.client&&e.client.X===r.clientX&&e.client.Y===r.clientY)})))return}else if("ajax"===e){var o=JSON.parse(t);if(o&&-1!==o.path.indexOf(this.options.reportUrl))return}else if("history"===e){if(this.userActionsRecords.slice(0).reverse().find((function(e){return"history"===e.category&&n-parseFloat(e.timestamp)<200&&e.msg===t})))return}else if("resource"===e){var i=JSON.parse(t);if(i&&-1!==i.path.indexOf("chrome-extension://"))return;if(i&&-1!==i.stackTrace.indexOf("chrome-extension://"))return}var a={timestamp:n+"",category:e,msg:t,client:r?{X:r.clientX,Y:r.clientY}:void 0};this.userActionsRecords.push(a),this.userActionsRecords.length>10&&this.userActionsRecords.shift()}catch(e){console.log(e)}},e.exports=t.default}])}));